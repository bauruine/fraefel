<ul class="breadcrumb">
  <li>
    <a href="/"><i class="icon-home"></i> Dashboard</a> <span class="divider">/</span>
  </li>
  <li class="active">
    <a href="/cargo_lists"><i class="icon-folder-open"></i> Versand</a>
  </li>
</ul>

<div class="page-header">
  <h1>Versand</h1>
</div>
<div class="row">
  <div class="span12">
    <div class="btn-toolbar fr">
      <div class="btn-group">
        <a class="btn" href="/cargo_lists/new"><i class="icon-plus-sign"></i> Versand erfassen</a>
      </div>
      <div class="btn-group">
        <a class="btn" href="#filter" data-toggle="modal"><i class="icon-search"></i> Filter</a>
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a href="#goto" data-toggle="modal"><i class="icon-screenshot"></i> Gehe zu</a></li>
          <!-- dropdown menu links -->
        </ul>
      </div>
    </div>
  </div>
</div>

<% if @cargo_lists.present? %>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Versand NR</th>
        <th>Anz. Paletten</th>
        <th>Für</th>
        <th>Land</th>
        <th>Abholtermin von</th>
        <th>Abholtermin bis</th>
      </tr>
    </thead>
    <tbody>
      <% @cargo_lists.each do |cargo_list| %>
        <tr>
          <td><%= link_to(cargo_list.id, cargo_list_path(cargo_list)) %></td>
          <td><%= cargo_list.pallets.count %></td>
          <td><%= cargo_list.referee.present? ? cargo_list.referee : "Bitte Name eintragen!"%></td>
          <td><%= cargo_list.country %></td>
          <td><%= cargo_list.pick_up_time_earliest.to_formatted_s(:long) %></td>
          <td><%= cargo_list.pick_up_time_latest.to_formatted_s(:long) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div id="flash_notice">Keine Liefer Papiere gefunden...</div>
<% end %>

<div class="modal fade" id="filter">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Versand - Filter anwenden</h3>
  </div>
  <%= form_for @search, :html => {:class => "form-horizontal", :style => "margin-bottom:0;", :method => :get} do |f| %>
    <div class="modal-body">
      <div class="control-group">
        <%= f.label :delivered_equals, "Versendet", :class => "control-label" %>
        <div class="controls">
          <%= f.select(:delivered_equals, { 'Nein'=>false, 'Ja'=>true }, {}) %>
        </div>
      </div>
    
      <div class="control-group">
        <%= f.label :country_equals, "Land", :class => "control-label" %>
        <div class="controls">
          <%= f.select(:country_equals, { 'Deutschland' => 'DE', 'Schweiz' => 'CH' }, {}) %>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <%= f.submit "Filter anwenden", :disable_with => 'Wende Filter an...', :name => nil, :class => "btn btn-primary" %>
    </div>
  <% end %>
</div>

<div class="modal fade" id="goto">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Versand - Gehe zu</h3>
  </div>
  <%= form_tag(search_for_cargo_lists_path, {:class => "form-horizontal", :style => "margin-bottom:0;", :method => :get}) do %>
    <div class="modal-body">
      <div class="control-group">
        <%= label_tag(:cargo_list_id, "Versand NR", :class => "control-label") %>
        <div class="controls">
          <%= text_field_tag(:cargo_list_id, nil, :class => "text_field") %>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <%= submit_tag "Gehe zu Versand", :disable_with => 'Filterning...', :name => nil, :class => "btn btn-primary" %>
    </div>
  <% end %>
</div>
